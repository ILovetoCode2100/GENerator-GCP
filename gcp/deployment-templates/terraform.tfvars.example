# Terraform Variables Template for Virtuoso API CLI
# This file will be auto-populated by the deployment wizard

# Project Configuration
project_id = "your-project-id"
project_number = "your-project-number"
region = "us-central1"
zone = "us-central1-a"

# Service Configuration
service_name = "virtuoso-api-cli"
service_description = "Virtuoso API CLI Service"

# Environment
environment = "production"
labels = {
  app         = "virtuoso-api-cli"
  environment = "production"
  managed-by  = "terraform"
}

# Cloud Run Configuration
cloud_run_config = {
  memory        = "512Mi"
  cpu           = "1"
  min_instances = 0
  max_instances = 100
  concurrency   = 80
  timeout       = 300
  cpu_boost     = false

  # Auto-scaling
  cpu_utilization     = 60
  request_utilization = 80

  # Container configuration
  port = 8080

  # Startup probe
  startup_probe = {
    initial_delay_seconds = 0
    timeout_seconds       = 240
    period_seconds        = 240
    failure_threshold     = 1
    tcp_socket = {
      port = 8080
    }
  }

  # Liveness probe
  liveness_probe = {
    initial_delay_seconds = 10
    timeout_seconds       = 1
    period_seconds        = 10
    failure_threshold     = 3
    http_get = {
      path = "/health"
      port = 8080
    }
  }
}

# Container Registry
container_registry = {
  location = "us"
  format   = "DOCKER"
}

# Virtuoso Configuration
virtuoso_config = {
  org_id  = "2242"
  api_url = "https://api-app2.virtuoso.qa/api"
}

# Security Configuration
security_config = {
  allow_unauthenticated = true

  # VPC connector (optional)
  vpc_connector = null

  # Binary authorization
  binary_authorization = false

  # Secret Manager
  use_secret_manager = true
}

# Networking Configuration
networking_config = {
  ingress = "all"

  # Custom domain (optional)
  custom_domains = []

  # Load balancer (optional)
  use_load_balancer = false
}

# Monitoring Configuration
monitoring_config = {
  # Logging
  log_level = "INFO"

  # Metrics
  enable_metrics = true

  # Tracing
  enable_tracing = false

  # Profiling
  enable_profiling = false

  # Alerting policies
  alert_policies = {
    high_error_rate = {
      enabled   = true
      threshold = 5  # percent
    }
    high_latency = {
      enabled   = true
      threshold = 5000  # milliseconds
    }
  }
}

# Backup Configuration
backup_config = {
  enabled = false

  # Backup schedule (cron format)
  schedule = "0 2 * * *"  # Daily at 2 AM

  # Retention
  retention_days = 30
}

# Cost Management
cost_management = {
  # Budget alerts
  monthly_budget_usd = 100

  # Resource quotas
  enable_quotas = true

  # Cost allocation tags
  cost_center = "engineering"
  project_code = "virtuoso-cli"
}
