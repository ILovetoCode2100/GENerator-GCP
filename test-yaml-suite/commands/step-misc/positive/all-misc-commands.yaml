# Comprehensive Misc Commands Test
# Tests comment and execute JavaScript operations

name: "Complete Misc Commands Test"
description: "Tests comment and JavaScript execution"

config:
  continue_on_error: false
  output_format: "json"

steps:
  # Comments for documentation
  - misc:
      action: "comment"
      text: "Starting test execution"

  - misc:
      action: "comment"
      text: "Navigation section"

  - navigate:
      action: "to"
      url: "https://example.com"

  - misc:
      action: "comment"
      text: "Executing JavaScript to check page state"

  # JavaScript execution
  - misc:
      action: "execute"
      script: "console.log('Test started');"

  - misc:
      action: "execute"
      script: "document.title = 'Modified Title';"

  - misc:
      action: "execute"
      script: "return document.querySelectorAll('div').length;"

  - misc:
      action: "execute"
      script: "window.scrollTo(0, 100);"

  # Complex JavaScript
  - misc:
      action: "execute"
      script: |
        const elements = document.querySelectorAll('.item');
        return elements.length;

  - misc:
      action: "execute"
      script: |
        const date = new Date();
        document.getElementById('timestamp').value = date.toISOString();

  - misc:
      action: "execute"
      script: |
        // Add custom class to elements
        document.querySelectorAll('.highlight').forEach(el => {
          el.classList.add('test-marked');
        });

  # JavaScript with return values
  - misc:
      action: "execute"
      script: "return window.location.href;"
      variable: "currentUrl"

  - misc:
      action: "execute"
      script: "return document.querySelector('h1').textContent;"
      variable: "pageTitle"

  - misc:
      action: "execute"
      script: "return localStorage.getItem('user_id');"
      variable: "userId"

  # Comments for test sections
  - misc:
      action: "comment"
      text: "=== Form Validation Test ==="

  - interact:
      action: "write"
      target: "input#email"
      text: "test@example.com"

  - misc:
      action: "comment"
      text: "Triggering form validation"

  - misc:
      action: "execute"
      script: "document.querySelector('form').checkValidity();"

  # JavaScript for element manipulation
  - misc:
      action: "execute"
      script: "document.querySelector('button.hidden').style.display = 'block';"

  - misc:
      action: "execute"
      script: "document.querySelector('input#readonly').removeAttribute('readonly');"

  # Long comments
  - misc:
      action: "comment"
      text: "This is a longer comment that provides detailed context about the test scenario we're about to execute. It helps document complex test flows."

  # JavaScript error handling
  - misc:
      action: "execute"
      script: |
        try {
          const data = JSON.parse(document.querySelector('#data').textContent);
          return data.status;
        } catch (e) {
          return 'error';
        }
      variable: "dataStatus"
