name: Rocketshop Purchase Test
url: https://rocketshop.virtuoso.qa
steps:
  # Navigate to the shop
  - navigate: https://rocketshop.virtuoso.qa

  # Wait for page to load and verify element is present
  - assert:
      text: "Border Not Found"
      exists: true

  # Wait before interacting (converted from sleep)
  - wait: 20000

  # Add item to bag - using multiple selectors for robustness
  - click:
      text: "Add to Bag"
      css: "#add_4318"

  # Navigate to shopping bag
  - click:
      text: "Shopping Bag"
      css: "[href=\"#/bag\"]"

  # Verify we're on the shopping bag page
  - assert:
      text: "Shopping Bag"
      tag: h1
      exists: true

  # Proceed to checkout
  - click:
      text: "Go to Checkout"
      css: ".mt-4 > .bg-rocket-orange"

  # Fill checkout form - Customer info
  - write:
      text: "John Doe"
      label: "Full name"

  - write:
      text: "johndoe@example.com"
      label: "Email"

  - write:
      text: "123 Elm Street"
      label: "Address"

  - write:
      text: "555-1234"
      label: "Phone numbers"

  - write:
      text: "90210"
      label: "ZIP code"

  # Fill payment info
  - write:
      text: "4111 1111 1111 1111"
      label: "Card number"

  - write:
      text: "234"
      css: ".w-auto > .focus\\:border-rocket-orange"

  # Complete purchase
  - click:
      text: "Confirm and Pay"
      css: ".text-right > .bg-rocket-orange"

  # Wait for confirmation
  - wait: 20000

  # Verify purchase confirmation
  - assert:
      text: "Purchase Confirmed!"
      tag: h3
      exists: true

  # Download confirmation
  - click:
      text: "Download Confirmation"
      css: ".border-t > .bg-rocket-orange"
