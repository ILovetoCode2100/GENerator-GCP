name: MARKET-JOURNEY-001 - Create Customer Journey - Build multi-step customer journey
description: 'Build multi-step customer journey (Module: Marketing, Suite: Customer Journeys)'
starting_url: https://[instance].crm.dynamics.com
steps:
- click: Customer journeys
- click: New
- click: Blank template
- write:
    selector: Name
    text: New Customer Onboarding - $TIMESTAMP
- click: Set audience
- click: Define new segment
- write:
    selector: Segment name
    text: New Customers This Month
- click: Design
- click: Add group
- select:
    selector: Entity
    option: Contact
- click: Add condition
- select:
    selector: Field
    option: Created on
- select:
    selector: Operator
    option: Last month
- click: Save and close
- comment: Drag "Send an email" from toolbox to canvas
- click: dropped element
- select:
    selector: Marketing email
    option: $emailId
- write:
    selector: Days to wait after
    text: '2'
- comment: Drag "If/then" from toolbox after email
- click: condition element
- select:
    selector: Condition type
    option: Email opened
- select:
    selector: Branch if
    option: 'Yes'
- comment: Drag "Send an email" to "Yes" branch
- select:
    selector: Marketing email
    option: Product Demo Email
- comment: Drag "Wait" to "No" branch
- write:
    selector: Days
    text: '3'
- comment: Drag "Send an email" after wait
- select:
    selector: Marketing email
    option: Reminder Email
- click: Save
- assert_text:
    selector: Status
    expected: Draft
