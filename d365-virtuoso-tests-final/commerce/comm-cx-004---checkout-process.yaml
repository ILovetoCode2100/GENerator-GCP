name: COMM-CX-004 - Checkout Process - Complete checkout with payment
description: 'Complete checkout with payment (Module: Commerce, Suite: Customer Experience)'
starting_url: https://[instance].crm.dynamics.com
steps:
- write:
    selector: Full name
    text: Test Customer
- write:
    selector: Address
    text: 123 Main St
- write:
    selector: City
    text: Seattle
- select:
    selector: State
    option: WA
- write:
    selector: ZIP code
    text: '98101'
- write:
    selector: Phone
    text: 425-555-0100
- click: Continue to shipping
- comment: Assert that shipping options display
- comment: Pick "Express Shipping (2-3 days)"
- comment: Assert that shipping cost updates
- click: Continue to payment
- comment: Pick "Credit card" from payment methods
- write:
    selector: Card number
    text: '4111111111111111'
- write:
    selector: Name on card
    text: Test Customer
- write:
    selector: Expiry
    text: 12/25
- write:
    selector: CVV
    text: '123'
- comment: Check "Save payment method"
- click: Review order
- comment: Assert that order summary is correct
- comment: Assert that all charges display
- comment: Check "I agree to terms"
- click: Place order
- wait: 5
- assert: Order confirmed
- store:
    type: text
    selector: Order number
    variable: $orderNumber
