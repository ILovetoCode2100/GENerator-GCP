name: COMM-CX-003 - Add to Cart and Checkout - Complete purchase flow
description: 'Complete purchase flow (Module: Commerce, Suite: Customer Experience)'
starting_url: https://[instance].crm.dynamics.com
steps:
- click: Surface Pro 9 - 512GB
- wait: 2
- assert_text:
    selector: Price
    expected: $1,299.99
- assert: In stock
- select:
    selector: Color
    option: Black
- comment: Assert that product image updates
- click: Add to cart
- wait: 2
- comment: Assert that element "Added to cart" notification appears
- click: Accessories
- click: Surface Pen
- click: Add to cart
- click: Cart (2)
- comment: Assert that cart shows 2 items
- comment: Assert that subtotal calculates correctly
- write:
    selector: Promo code
    text: SPRING24
- click: Apply
- comment: Assert that discount applies correctly
- click: Checkout
- comment: If not signed in
- click: Checkout as guest
- write:
    selector: Email
    text: guest@email.com
