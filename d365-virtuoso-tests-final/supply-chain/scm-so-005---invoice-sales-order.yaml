name: SCM-SO-005 - Invoice Sales Order - Generate and post customer invoice
description: 'Generate and post customer invoice (Module: Supply Chain, Suite: Sales Order Processing)'
starting_url: https://[instance].crm.dynamics.com
steps:
- click: Invoice
- click: Invoice
- click: 'Default from: Packing slip quantity'
- comment: Assert that quantities populate from packing slip
- comment: Assert that element "Invoice amount" calculates correctly
- comment: Assert that tax is calculated
- write:
    selector: Invoice text
    text: Standard delivery
- click: Post
- wait: 3
- assert: Posted sales invoice
- store:
    type: text
    selector: Invoice number
    variable: $invoiceNumber
- click: Invoice
- click: Print
- select:
    selector: Print destination
    option: Email
- comment: Assert that customer email populates
- click: OK
