name: SCM-PO-001 - Create Purchase Order - Create and process purchase order
description: 'Create and process purchase order (Module: Supply Chain, Suite: Purchase Order Processing)'
starting_url: https://[instance].crm.dynamics.com
steps:
- click: Procurement and sourcing
- click: Purchase orders
- click: All purchase orders
- click: New
- select:
    selector: Vendor account
    option: VEND-001
- comment: Assert that element "Vendor name" populates
- assert_text:
    selector: Currency
    expected: USD
- select:
    selector: Warehouse
    option: WH-001
- select:
    selector: Site
    option: Site-001
- click: Lines
- click: Add line
- select:
    selector: Item number
    option: $itemNumber
- write:
    selector: Quantity
    text: '100'
- comment: Assert that "Unit price" populates from trade agreement
- write:
    selector: Delivery date
    text: $DATE_PLUS_7
- click: Add line
- select:
    selector: Item number
    option: PROD-002
- write:
    selector: Quantity
    text: '50'
- write:
    selector: Unit price
    text: '25.00'
- comment: Assert that element "Net amount" calculates correctly
- click: Save
- store:
    type: text
    selector: Purchase order
    variable: $purchaseOrder
